<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Posts - Adama Shopping</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link rel="stylesheet" href="/css/mypost.css">
  <style>
  
  </style>
</head>
<body>

  <header>
    <div class="header-left">
      <h1><img src="images/ads.png" alt="Adama Shopping Logo"> Adama Shopping</h1>
    </div>
    <nav class="header-nav">
      <a href="/" class="nav-link">Home</a>
      <a href="/about" class="nav-link">About</a>
      <a href="/privacy" class="nav-link">Privacy</a>
      <a href="/services" class="nav-link">Service</a>
      <!-- Conditional rendering for login/signup vs user actions -->
      <% if (user) { %>
        <a href="/mypost" class="nav-link active">My Posts</a> <!-- 'active' for this page -->
        <a href="/order" class="nav-link">Orders</a>
        <a href="/logout" class="nav-link">Logout</a>
      <% } else { %>
        <a href="/login" class="nav-link">Login</a>
        <a href="/signup" class="nav-link">Sign Up</a>
      <% } %>
    </nav>
  </header>

  <div class="main-container">
    <h1>My Posts</h1>

    <div class="search-bar-container">
      <div class="search-bar">
        <input type="text" id="postSearch" placeholder="ðŸ” Search your posts by title or description...">
        <button type="button" id="searchButton"><span class="material-icons">search</span> Search</button>
      </div>
    </div>

    <% if (posts && posts.length > 0) { %>
      <div class="posts-grid-container" id="postsGrid">
        <% posts.forEach(post => { %>
          <div class="post">
            <div class="user-info">
              <% if (user && user.image) { %>
                <img src="/images/<%= user.image %>" alt="<%= user.name %> Profile Image">
              <% } else { %>
                <img src="/images/default-user.png" alt="Default User Image">
              <% } %>
              <strong><%= user.name %></strong>
              <span><span class="material-icons">phone</span> <%= user.phone %></span>
            </div>
            <h3><%= post.title %></h3>
            <% if (post.image) { %>
              <img class="post-image" src="/images/<%= post.image %>" alt="Post image for <%= post.title %>">
            <% } %>
            <p><%= post.description %></p>
            <p><em><span class="material-icons">folder</span> Category: <%= post.category %></em></p>
            <div class="actions">
              <!-- Edit button -->
              <form action="/mypost/edit/<%= post.id %>" method="GET" style="display:inline;">
                <button type="submit" class="edit-btn"><span class="material-icons">edit</span> Edit</button>
              </form>

              <!-- Delete button -->
              <form action="/mypost/delete/<%= post.id %>" method="POST" style="display:inline;" onsubmit="return confirm('Are you sure you want to delete this post?');">
                <button type="submit" class="delete-btn"><span class="material-icons">delete</span> Delete</button>
              </form>
            </div>
          </div>
        <% }) %>
      </div>
    <% } else { %>
      <div class="no-posts" id="noPostsMessage">
        <span class="material-icons">inbox</span>
        <p>You have no posts yet. <a href="/post">Create one now</a>.</p>
      </div>
    <% } %>

    <a href="/" class="back-home"><span class="material-icons">arrow_back</span> Back to Home</a>
  </div>

<script src="/js/mypost.js"></script>
</body>
</html>