<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title><%= profile ? profile.name : 'User' %> | Adama Shopping</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/up.css">
  <style>
 
  </style>
</head>
<body>
  <div class="navbar">
    <div class="navbar-container">
      <a href="/" class="navbar-brand">
        <img src="/images/ads.png" alt="Adama Shopping Logo" width="100" height="100"> Adama Shopping
      </a>
      <ul class="navbar-links">
        <li><a href="/" >Home</a></li>
        <li><a href="/" class="active">User Profile</a></li>
        <li><a href="/profile">about</a></li>
        <li><a href="/privecy">privecy</a></li>
        <li><a href="/services">Services</a></li>
        <li><a href="/logout">Logout</a></li>
      </ul>
    </div>
  </div>

  <div class="container">
    <% if (profile) { %>
      <div class="profile-card">
        <img src="/images/<%= profile.image || 'default-user.png' %>" alt="<%= profile.name %>" class="profile-img-clickable" id="profileImage">
        <div class="profile-info">
          <h2><%= profile.name %></h2>
          <p><i class="fas fa-phone-alt"></i> <%= profile.phone %></p>
        </div>
      </div>
    <% } %>

    <% if (message) { %>
      <p class="empty-message"><%= message %></p>
    <% } else { %>
      <div class="post-grid">
        <% userPosts.forEach(post => { %>
          <div class="post-card">
            <% if (post.image) { %>
              <img src="/images/<%= post.image %>" alt="Post image" class="post-image">
            <% } %>
            <h3><%= post.title %></h3>
            <p class="description"><%= post.description %></p>
            <div class="post-meta">
              <p><i class="fas fa-tag"></i> <strong>Category:</strong> <%= post.category %></p>
              <% if (post.budget) { %>
                <p><i class="fas fa-money-bill-wave"></i> <strong>Budget:</strong> <%= post.budget %> ETB</p>
              <% } %>
            </div>

            <% if (user) { %>
              <form action="/order/<%= post.id %>" method="POST" class="order-form">
                <label for="quantity-<%= post.id %>">Qty:</label>
                <input type="number" id="quantity-<%= post.id %>" name="quantity" value="1" min="1" class="quantity-input">
                <button type="submit" class="order-btn">
                  <i class="fas fa-shopping-bag"></i> Order This
                </button>
              </form>
            <% } else { %>
              <p style="margin-top: 15px; color: var(--light-text); font-style: italic;">
                <i class="fas fa-lock"></i> Please log in to order.
              </p>
            <% } %>
          </div>
        <% }); %>
      </div>
    <% } %>

    <a href="/" class="back-btn"><i class="fas fa-arrow-left"></i> Back to Home</a>
  </div>

  <!-- Modal for profile image -->
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <img class="modal-content" id="modalImage">
    <div id="caption"></div>
  </div>

<script src="/js/ups.js"></script>
</body>
</html>